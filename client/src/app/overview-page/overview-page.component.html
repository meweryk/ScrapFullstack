<div class="page-title">
    <h5>
        Обзор за вчера ({{yesterday | date: 'dd.MM.yyyy'}})
        <i class="material-icons black-text pointer" (click)="openInfo()">info_outline</i>
    </h5>
</div>

<div class="row" *ngIf="data$ | async as data; else loader">
    <div class="col s12 l6">
        <div class="card indigo lighten-4 z-depth-3 white-text">
            <div class="card-content">
                <span class="card-title">Выручка: {{data.gain.yesterdayOut - data.gain.yesterdayIn}} грн</span>
                <div class="section">
                    <h6>по Вашим заказам на поставку</h6>
                    <h5>{{data.gain.yesterdayIn}} грн.</h5>
                    <div [ngClass]=" {
                    'green-text text-darken-2': data.gain.isHigherIn, 
                    'red-text text-darken-2': !data.gain.isHigherIn
                }">
                        <h5 class="m0 mb1">
                            <i class="material-icons">
                                {{data.gain.isHigherIn ? 'arrow_upward' : 'arrow_downward'}}
                            </i>
                            {{data.gain.percentIn}}%
                        </h5>
                        <p>
                            Сумма по заказам на {{data.gain.percentIn}}%
                            {{data.gain.isHigherIn ? 'выше' : 'ниже'}} среднего:
                            на {{data.gain.compareIn}} грн. в день
                        </p>
                    </div>
                </div>
                <div class="divider"></div>
                <div class="section">
                    <h6>по заказам на отгрузку</h6>
                    <h5>{{data.gain.yesterdayOut}} грн.</h5>
                    <div [ngClass]=" {
                    'green-text text-darken-2': data.gain.isHigherOut, 
                    'red-text text-darken-2': !data.gain.isHigherOut
                }">
                        <h5 class="m0 mb1">
                            <i class="material-icons">
                                {{data.gain.isHigherOut ? 'arrow_upward' : 'arrow_downward'}}
                            </i>
                            {{data.gain.percentOut}}%
                        </h5>
                        <p>
                            По заказам на отгрузку сумма на {{data.gain.percentOut}}%
                            {{data.gain.isHigherOut ? 'выше' : 'ниже'}} среднего:
                            {{data.gain.compareOut}} грн. в день
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="col s12 l6">
        <div class="card amber darken-1 z-depth-3 white-text">
            <div class="card-content">
                <span class="card-title">Заказы: {{data.orders.yesterdayIn + data.orders.yesterdayOut}} зак.</span>
                <div class="section">
                    <h6>На поставку</h6>
                    <h5>{{data.orders.yesterdayIn}} зак.</h5>
                    <div
                        [ngClass]=" {'green-text text-darken-2': data.orders.isHigherIn, 'red-text text-darken-2': !data.orders.isHigherIn}">
                        <h5 class="m0 mb1">
                            <i class="material-icons">
                                {{data.orders.isHigherIn ? 'arrow_upward' : 'arrow_downward'}}
                            </i>
                            {{data.orders.percentIn}}%
                        </h5>
                        <p>Число заказов на приход вчера на {{data.orders.percentIn}}%
                            {{data.orders.isHigherIn ? 'выше' : 'ниже'}}
                            среднего значения: на {{data.orders.compareIn}} зак. в день</p>
                    </div>
                </div>
                <div class="divider"></div>
                <div class="section">
                    <h6>На отгрузку</h6>
                    <h5>{{data.orders.yesterdayOut}} зак.</h5>
                    <div
                        [ngClass]=" {'green-text text-darken-2': data.orders.isHigherOut, 'red-text text-darken-2': !data.orders.isHigherOut}">
                        <h5 class="m0 mb1">
                            <i class="material-icons">
                                {{data.orders.isHigherOut ? 'arrow_upward' : 'arrow_downward'}}
                            </i>
                            {{data.orders.percentOut}}%
                        </h5>
                        <p>
                            Число заказов на отгрузку вчера на {{data.orders.percentOut}}%
                            {{data.orders.isHigherOut ? 'выше' : 'ниже'}}
                            среднего значения: на {{data.orders.compareOut}} зак. в день</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #loader>
    <app-loader></app-loader>
</ng-template>

<div class="tap-target" data-target="menu" #tapTarget>
    <div class="tap-target-content">
        <h5>Зачем нужна эта страница?</h5>
        <p>Страница “Обзор” покажет динамику продаж за предыдущий день. Сравнение со средним значениями поможет вам
            понять, как идут дела у Вашего бизнеса.</p>
    </div>
</div>