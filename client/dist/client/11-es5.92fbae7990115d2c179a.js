function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"eV+i":function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),o=i("PCNd"),c=i("O+p6"),l=i("3Pt+"),a=i("fXoL"),r=i("slBj"),b=["select1"],s=["select2"];function f(t,e){if(1&t&&(a.Ob(0,"option",19),a.Ob(1,"span",10),a.qc(2),a.Mb(),a.Mb()),2&t){var i=e.$implicit;a.cc("value",i),a.yb(2),a.rc(i)}}function m(t,e){if(1&t&&(a.Ob(0,"option",19),a.Ob(1,"span",10),a.qc(2),a.Mb(),a.Mb()),2&t){var i=e.$implicit;a.cc("value",i),a.yb(2),a.rc(i)}}var u,d=((u=function(){function t(){_classCallCheck(this,t),this.onFilter=new a.n}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.select1=c.a.initFormSelect(this.select1Ref),this.select2=c.a.initFormSelect(this.select2Ref)}},{key:"ngOnDestroy",value:function(){this.select1.destroy(),this.select2.destroy()}},{key:"submitFilter",value:function(){var t={};this.vid&&(t.vid=this.vid),this.classSteel&&(t.classSteel=this.classSteel),this.groupSteel&&(t.groupSteel=this.groupSteel),this.onFilter.emit(t)}}]),t}()).\u0275fac=function(t){return new(t||u)},u.\u0275cmp=a.Eb({type:u,selectors:[["app-materials-filter"]],viewQuery:function(t,e){var i;1&t&&(a.vc(b,!0),a.vc(s,!0)),2&t&&(a.gc(i=a.Xb())&&(e.select1Ref=i.first),a.gc(i=a.Xb())&&(e.select2Ref=i.first))},inputs:{arrClassSteel:"arrClassSteel",arrGroupSteel:"arrGroupSteel"},outputs:{onFilter:"onFilter"},decls:32,vars:5,consts:[[1,"filter","js-filter-blokc"],[1,"row"],[1,"col","s12","m2"],[1,"input-field"],["type","text","id","vid",2,"font-size","14px",3,"ngModel","ngModelChange"],["for","vid"],[1,"col","s12","m5"],[3,"ngModel","ngModelChange"],["select1",""],["value","","selected",""],[2,"font-size","14px"],[3,"value",4,"ngFor","ngForOf"],["for","classSteel"],[1,"col","s10","m4"],["select2",""],["for","groupSteel"],[1,"col","s2","m1"],[1,"collection-item","collection-item-icon",3,"click"],[1,"material-icons"],[3,"value"]],template:function(t,e){1&t&&(a.Ob(0,"div",0),a.Ob(1,"div",1),a.Ob(2,"div",2),a.Ob(3,"div",3),a.Ob(4,"input",4),a.Wb("ngModelChange",(function(t){return e.vid=t})),a.Mb(),a.Ob(5,"label",5),a.qc(6,"\u0412\u0438\u0434"),a.Mb(),a.Mb(),a.Mb(),a.Ob(7,"div",6),a.Ob(8,"div",3),a.Ob(9,"select",7,8),a.Wb("ngModelChange",(function(t){return e.classSteel=t})),a.Ob(11,"option",9),a.Ob(12,"span",10),a.qc(13,"\u0411\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430"),a.Mb(),a.Mb(),a.oc(14,f,3,2,"option",11),a.Mb(),a.Ob(15,"label",12),a.qc(16,"\u041a\u043b\u0430\u0441\u0441"),a.Mb(),a.Mb(),a.Mb(),a.Ob(17,"div",13),a.Ob(18,"div",3),a.Ob(19,"select",7,14),a.Wb("ngModelChange",(function(t){return e.groupSteel=t})),a.Ob(21,"option",9),a.Ob(22,"span",10),a.qc(23,"\u0411\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430"),a.Mb(),a.Mb(),a.oc(24,m,3,2,"option",11),a.Mb(),a.Ob(25,"label",15),a.qc(26,"\u0413\u0440\u0443\u043f\u043f\u0430"),a.Mb(),a.Mb(),a.Mb(),a.Ob(27,"div",16),a.Ob(28,"a",17),a.Wb("click",(function(t){return e.submitFilter()})),a.Ob(29,"span"),a.Ob(30,"i",18),a.qc(31,"done_outline"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&t&&(a.yb(4),a.cc("ngModel",e.vid),a.yb(5),a.cc("ngModel",e.classSteel),a.yb(5),a.cc("ngForOf",e.arrClassSteel),a.yb(5),a.cc("ngModel",e.groupSteel),a.yb(5),a.cc("ngForOf",e.arrGroupSteel))},directives:[l.a,l.i,l.k,l.o,l.l,l.q,n.k],styles:[".col[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{margin-top:10px!important;margin-bottom:10px!important}"]}),u),p=i("668k"),g=["modal"],h=["autocompleteCl"],v=["autocompleteGr"];function M(t,e){if(1&t){var i=a.Pb();a.Ob(0,"app-materials-filter",62),a.Wb("onFilter",(function(t){return a.jc(i),a.Yb().applyFilter(t)})),a.Mb()}if(2&t){var n=a.Yb();a.cc("arrClassSteel",n.arrClassSteel)("arrGroupSteel",n.arrGroupSteel)}}function O(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.ni)}}function y(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.cr)}}function C(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.mo)}}function S(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.cu)}}function q(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.mn)}}function I(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.w)}}function k(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.v)}}function x(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.co)}}function w(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.ti)}}function F(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.fe)}}function _(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.p)}}function N(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.s)}}function P(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){var i=a.Yb().$implicit;a.yb(1),a.rc(i.c)}}function G(t,e){1&t&&a.Lb(0,"td")}function L(t,e){if(1&t){var i=a.Pb();a.Ob(0,"tbody"),a.Ob(1,"tr"),a.Ob(2,"th"),a.Ob(3,"a",69),a.Wb("click",(function(t){a.jc(i);var n=e.$implicit;return a.Yb(3).onSelectMaterial(n)})),a.qc(4),a.Mb(),a.Mb(),a.oc(5,O,2,1,"td",70),a.oc(6,y,2,1,"td",70),a.oc(7,C,2,1,"td",70),a.oc(8,S,2,1,"td",70),a.oc(9,q,2,1,"td",70),a.oc(10,I,2,1,"td",70),a.oc(11,k,2,1,"td",70),a.oc(12,x,2,1,"td",70),a.Ob(13,"td"),a.qc(14),a.Mb(),a.oc(15,w,2,1,"td",70),a.Ob(16,"td"),a.qc(17),a.Mb(),a.Ob(18,"td"),a.qc(19),a.Mb(),a.oc(20,F,2,1,"td",70),a.oc(21,_,2,1,"td",70),a.oc(22,N,2,1,"td",70),a.oc(23,P,2,1,"td",70),a.Ob(24,"td"),a.qc(25),a.Mb(),a.Ob(26,"td"),a.Ob(27,"a",71),a.Ob(28,"span"),a.Ob(29,"i",72),a.Wb("click",(function(t){a.jc(i);var n=e.$implicit;return a.Yb(3).onSelectMaterial(n)})),a.qc(30,"autorenew"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Ob(31,"td"),a.Ob(32,"a",71),a.Ob(33,"span"),a.Ob(34,"i",72),a.Wb("click",(function(t){a.jc(i);var n=e.$implicit;return a.Yb(3).onDeleteMaterial(t,n)})),a.qc(35,"delete"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.oc(36,G,1,0,"ng-template",null,73,a.pc),a.Mb(),a.Mb()}if(2&t){var n=e.$implicit,o=a.hc(37);a.yb(4),a.rc(n.vid),a.yb(1),a.cc("ngIf",0!==n.ni)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.cr)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.mo)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.cu)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.mn)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.w)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.v)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.co)("ngIfElse",o),a.yb(2),a.rc(n.si),a.yb(1),a.cc("ngIf",0!==n.ti)("ngIfElse",o),a.yb(2),a.rc(n.al),a.yb(2),a.rc(n.nb),a.yb(1),a.cc("ngIf",0!==n.fe)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.p)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.s)("ngIfElse",o),a.yb(1),a.cc("ngIf",0!==n.c)("ngIfElse",o),a.yb(2),a.rc(n.markSteel)}}function Y(t,e){if(1&t&&(a.Ob(0,"div"),a.Ob(1,"div",65),a.Ob(2,"div",66),a.Ob(3,"table"),a.Ob(4,"thead"),a.Ob(5,"tr"),a.Ob(6,"th"),a.qc(7,"\u0413\u0440\u0443\u043f\u043f\u0430"),a.Lb(8,"br"),a.qc(9,"\u043e\u0442\u0445\u043e\u0434\u043e\u0432"),a.Mb(),a.Ob(10,"th"),a.qc(11,"Ni%"),a.Mb(),a.Ob(12,"th"),a.qc(13,"Cr%"),a.Mb(),a.Ob(14,"th"),a.qc(15,"Mo%"),a.Mb(),a.Ob(16,"th"),a.qc(17,"Cu%"),a.Mb(),a.Ob(18,"th"),a.qc(19,"Mn%"),a.Mb(),a.Ob(20,"th"),a.qc(21,"W%"),a.Mb(),a.Ob(22,"th"),a.qc(23,"V%"),a.Mb(),a.Ob(24,"th"),a.qc(25,"Co%"),a.Mb(),a.Ob(26,"th"),a.qc(27,"Si%"),a.Mb(),a.Ob(28,"th"),a.qc(29,"Ti%"),a.Mb(),a.Ob(30,"th"),a.qc(31,"Al%"),a.Mb(),a.Ob(32,"th"),a.qc(33,"Nb%"),a.Mb(),a.Ob(34,"th"),a.qc(35,"Fe%"),a.Mb(),a.Ob(36,"th"),a.qc(37,"P%"),a.Mb(),a.Ob(38,"th"),a.qc(39,"S%"),a.Mb(),a.Ob(40,"th"),a.qc(41,"C%"),a.Mb(),a.Ob(42,"th"),a.qc(43,"\u041c\u0430\u0440\u043a\u0438 \u0441\u0442\u0430\u043b\u0435\u0439"),a.Mb(),a.Ob(44,"th",67),a.qc(45,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),a.Mb(),a.Mb(),a.Mb(),a.oc(46,L,38,31,"tbody",68),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&t){var i=a.Yb(2);a.yb(2),a.nc("height",i.height,"px"),a.yb(44),a.cc("ngForOf",i.materials)}}function $(t,e){1&t&&(a.Ob(0,"div",74),a.qc(1,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043d\u0435\u0442."),a.Mb())}function E(t,e){if(1&t&&(a.Ob(0,"div",13),a.oc(1,Y,47,2,"div",63),a.oc(2,$,2,0,"ng-template",null,64,a.pc),a.Mb()),2&t){var i=a.Yb();a.yb(1),a.cc("ngIf",i.materials.length>0)}}function V(t,e){1&t&&a.Lb(0,"app-loader")}function W(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041f\u043e\u0437\u0438\u0446\u0438\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439. "),a.Mb())}function j(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1,"\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439. "),a.Mb())}function R(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function A(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function T(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function z(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function X(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function D(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function H(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function B(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function K(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function J(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function Q(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function U(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function Z(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function tt(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function et(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function it(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}var nt,ot,ct=function(t,e){return{active:t,red:e}},lt=function(t){return{invalid:t}},at=((nt=function(){function t(e,i){_classCallCheck(this,t),this.materialsService=e,this._formBuilder=i,this.loading=!1,this.isFilterVisible=!1,this.koef=.7,this.isNew=!0,this.form=this._formBuilder.group({vid:[null,l.p.required],classSteel:["",l.p.required],groupSteel:"",markSteel:"",ni:[null,[l.p.min(0),l.p.max(100)]],cr:[null,[l.p.min(0),l.p.max(100)]],mo:[null,[l.p.min(0),l.p.max(100)]],cu:[null,[l.p.min(0),l.p.max(100)]],mn:[null,[l.p.min(0),l.p.max(100)]],w:[null,[l.p.min(0),l.p.max(100)]],v:[null,[l.p.min(0),l.p.max(100)]],co:[null,[l.p.min(0),l.p.max(100)]],si:null,ti:[null,[l.p.min(0),l.p.max(100)]],al:null,nb:null,fe:[null,[l.p.min(0),l.p.max(100)]],p:[null,[l.p.min(0),l.p.max(100)]],s:[null,[l.p.min(0),l.p.max(100)]],c:[null,[l.p.min(0),l.p.max(100)]]}),this.materialId=null,this.materialList=[],this.materials=[],this.filter={}}return _createClass(t,[{key:"ngOnInit",value:function(){this.loading=!0,this.height=this.koef*window.innerHeight,this.fetch(),this.arrClassSteel=this.arrClassSteel,this.arrGroupSteel=this.arrGroupSteel}},{key:"fetch",value:function(){var t=this,e=Object.assign({},this.filter);this.oSub=this.materialsService.fetch(e).subscribe((function(e){t.materials=e.materials,t.arrClassSteel=e.arrClassSteel,t.arrGroupSteel=e.arrGroupSteel,t.loading=!1}))}},{key:"onResize",value:function(t){this.height=this.koef*t.target.innerHeight}},{key:"ngAfterViewInit",value:function(){this.modal=c.a.initModal(this.modalRef),this.autocompleteCl=c.a.initAutocomplete(this.autocompleteClRef,this.validate.bind(this),0),this.autocompleteGr=c.a.initAutocomplete(this.autocompleteGrRef,this.validate.bind(this),0)}},{key:"ngOnDestroy",value:function(){this.modal.destroy(),this.oSub.unsubscribe(),this.autocompleteCl.destroy(),this.autocompleteGr.destroy()}},{key:"onCancel",value:function(){this.modal.close()}},{key:"filterVisible",value:function(){this.isFilterVisible=!this.isFilterVisible,this.koef=!0===this.isFilterVisible?.5:.7,this.height=this.koef*window.innerHeight}},{key:"applyFilter",value:function(t){this.materials=[],this.filter=t,this.loading=!0,this.fetch()}},{key:"isFiltered",value:function(){return 0!==Object.keys(this.filter).length}},{key:"update",value:function(){this.autocompleteCl.updateData(this.arrToString(this.arrClassSteel)),this.autocompleteGr.updateData(this.arrToString(this.arrGroupSteel))}},{key:"arrToString",value:function(t){this.data={};var e=!0,i=!1,n=void 0;try{for(var o,c=t[Symbol.iterator]();!(e=(o=c.next()).done);e=!0){var l=o.value;this.data[l]=null}}catch(a){i=!0,n=a}finally{try{e||null==c.return||c.return()}finally{if(i)throw n}}return this.data}},{key:"validate",value:function(){this.autocompleteCl.el.value&&this.form.patchValue({classSteel:this.autocompleteCl.el.value}),this.autocompleteGr.el.value&&this.form.patchValue({groupSteel:this.autocompleteGr.el.value})}},{key:"onAddMaterial",value:function(){this.materialId=null,this.form.reset({classSteel:"",groupSteel:"",markSteel:"",vid:null,ni:null,cr:null,mo:null,cu:null,mn:null,w:null,v:null,co:null,si:null,ti:null,al:null,nb:null,fe:null,p:null,s:null,c:null}),this.isNew=!0,this.modal.open(),c.a.updateTextInputs(),this.update()}},{key:"onSelectMaterial",value:function(t){this.materialId=t._id,this.form.patchValue({classSteel:t.classSteel,groupSteel:t.groupSteel,markSteel:t.markSteel,vid:t.vid,ni:0===t.ni?"":t.ni,cr:0===t.cr?"":t.cr,mo:0===t.mo?"":t.mo,cu:0===t.cu?"":t.cu,mn:0===t.mn?"":t.mn,w:0===t.w?"":t.w,v:0===t.v?"":t.v,co:0===t.co?"":t.co,si:t.si,ti:0===t.ti?"":t.ti,al:t.al,nb:t.nb,fe:0===t.fe?"":t.fe,p:0===t.p?"":t.p,s:0===t.s?"":t.s,c:0===t.c?"":t.c}),this.isNew=!1,this.modal.open(),c.a.updateTextInputs(),this.update()}},{key:"onDeleteMaterial",value:function(t,e){var i=this;t.stopPropagation(),window.confirm('\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b "'.concat(e.vid,'"?'))&&this.materialsService.delete(e).subscribe((function(t){var n=i.materials.findIndex((function(t){return t._id===e._id}));i.materials.splice(n,1),c.a.toast(t.message)}),(function(t){return c.a.toast(t.error.message)}))}},{key:"onSubmit",value:function(){var t=this;this.form.disable();var e={classSteel:this.autocompleteCl.el.value?this.autocompleteCl.el.value:this.form.value.classSteel,groupSteel:this.autocompleteGr.el.value?this.autocompleteGr.el.value:this.form.value.groupSteel,markSteel:this.form.value.markSteel,vid:this.form.value.vid,ni:this.form.value.ni?+this.form.value.ni.toFixed(2):0,cr:this.form.value.cr?+this.form.value.cr.toFixed(2):0,mo:this.form.value.mo?+this.form.value.mo.toFixed(2):0,cu:this.form.value.cu?+this.form.value.cu.toFixed(2):0,mn:this.form.value.mn?+this.form.value.mn.toFixed(2):0,w:this.form.value.w?+this.form.value.w.toFixed(2):0,v:this.form.value.v?+this.form.value.v.toFixed(2):0,co:this.form.value.co?+this.form.value.co.toFixed(2):0,si:this.form.value.si,ti:this.form.value.ti?+this.form.value.ti.toFixed(2):0,al:this.form.value.al,nb:this.form.value.nb,fe:this.form.value.fe?+this.form.value.fe.toFixed(2):0,p:this.form.value.p?+this.form.value.p.toFixed(3):0,s:this.form.value.s?+this.form.value.s.toFixed(3):0,c:this.form.value.c?+this.form.value.c.toFixed(2):0};if(e.groupSteel||(e.groupSteel=e.classSteel),e.ni+e.cr+e.mo+e.cu+e.mn+e.w+e.v+e.co+e.ti+e.p+e.s+e.c+e.fe>100)return this.modal.close(),this.form.enable(),c.a.toast("\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 100%");this.materialId?(e._id=this.materialId,this.materialsService.update(e).subscribe((function(e){var i=t.materials.findIndex((function(t){return t._id===e._id}));t.materials[i]=e,c.a.toast("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")}),(function(t){return c.a.toast(t.error.message)})),this.modal.close(),this.form.enable()):this.materials.findIndex((function(t){return t.vid===e.vid}))<0?this.materialsService.create(e).subscribe((function(e){c.a.toast("\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0441\u043e\u0437\u0434\u0430\u043d"),t.materials.push(e),t.materials.sort((function(t,e){return Intl.Collator().compare(t.vid,e.vid)}))}),(function(t){return c.a.toast(t.error.message)}),(function(){t.modal.close(),t.form.enable()})):(c.a.toast('\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b "'.concat(e.vid,'" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442')),this.modal.close(),this.form.enable())}}]),t}()).\u0275fac=function(t){return new(t||nt)(a.Kb(r.a),a.Kb(l.b))},nt.\u0275cmp=a.Eb({type:nt,selectors:[["app-materials-page"]],viewQuery:function(t,e){var i;1&t&&(a.vc(g,!0),a.vc(h,!0),a.vc(v,!0)),2&t&&(a.gc(i=a.Xb())&&(e.modalRef=i.first),a.gc(i=a.Xb())&&(e.autocompleteClRef=i.first),a.gc(i=a.Xb())&&(e.autocompleteGrRef=i.first))},hostBindings:function(t,e,i){1&t&&a.Wb("resize",(function(t){return e.onResize(t)}),!1,a.ic)},decls:127,vars:83,consts:[[1,"page-title"],["col","","s6",""],[1,"waves-effect","waves-light","btn","btn-small",3,"click"],[1,"material-icons"],[1,"btn","btn-small",3,"ngClass","click"],[3,"arrClassSteel","arrGroupSteel","onFilter",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"modal"],["modal",""],[1,"modal-content"],[1,"mb1"],[1,"row"],[1,"input-field","col","s12","m4"],["formControlName","vid","id","mat-vid","type","text","maxlength","15",3,"ngClass"],["for","mat-vid"],["class","helper-text red-text",4,"ngIf"],["name","classSteel","formControlName","classSteel","id","mat-classSteel","type","text","maxlength","40",1,"autocomplete",3,"ngClass"],["autocompleteCl",""],["for","mat-classSteel"],["formControlName","groupSteel","id","mat-groupSteel","type","text","maxlength","50",1,"autocomplete"],["autocompleteGr",""],["for","mat-groupSteel"],["formControlName","markSteel","id","mat-markSteel","type","text","maxlength","30"],["for","mat-markSteel"],[1,"input-field","col","s4","m2"],["formControlName","ni","id","mat-ni","type","number",3,"ngClass"],["for","mat-ni"],["formControlName","cr","id","mat-cr","type","number",3,"ngClass"],["for","mat-cr"],["formControlName","mo","id","mat-mo","type","number",3,"ngClass"],["for","mat-mo"],["formControlName","cu","id","mat-cu","type","number",3,"ngClass"],["for","mat-cu"],["formControlName","mn","id","mat-mn","type","number",3,"ngClass"],["for","mat-mn"],["formControlName","w","id","mat-w","type","number",3,"ngClass"],["for","mat-w"],["formControlName","v","id","mat-v","type","number",3,"ngClass"],["for","mat-v"],["formControlName","co","id","mat-co","type","number",3,"ngClass"],["for","mat-co"],["formControlName","si","id","mat-si","type","text",3,"ngClass"],["for","mat-si"],["formControlName","ti","id","mat-ti","type","number",3,"ngClass"],["for","mat-ti"],["formControlName","al","id","mat-al","type","text",3,"ngClass"],["for","mat-al"],["formControlName","nb","id","mat-nb","type","text",3,"ngClass"],["for","mat-nb"],["formControlName","fe","id","mat-fe","type","number",3,"ngClass"],["for","mat-fe"],["formControlName","p","id","mat-p","type","number",3,"ngClass"],["for","mat-p"],["formControlName","s","id","mat-s","type","number",3,"ngClass"],["for","mat-s"],["formControlName","c","id","mat-c","type","number",3,"ngClass"],["for","mat-c"],[1,"modal-footer"],["type","button",1,"modal-action","waves-effect","waves-black","btn-flat",3,"disabled","click"],["type","submit",1,"modal-action","btn","waves-effect",3,"disabled"],[3,"arrClassSteel","arrGroupSteel","onFilter"],[4,"ngIfEmpty","ngIf"],["empty",""],[1,"col","s12"],[1,"table-container"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"collection-item","collection-item-icon",3,"click"],[4,"ngIf","ngIfElse"],[1,"collection-item","collection-item-icon"],[1,"material-icons",3,"click"],["space",""],[1,"center"],[1,"helper-text","red-text"]],template:function(t,e){1&t&&(a.Ob(0,"div",0),a.Ob(1,"h5"),a.qc(2,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),a.Mb(),a.Ob(3,"div",1),a.Ob(4,"button",2),a.Wb("click",(function(t){return e.onAddMaterial()})),a.Ob(5,"i",3),a.qc(6,"add"),a.Mb(),a.Mb(),a.Ob(7,"span"),a.qc(8,"\xa0"),a.Mb(),a.Ob(9,"button",4),a.Wb("click",(function(t){return e.filterVisible()})),a.Ob(10,"i",3),a.qc(11,"filter_list"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.oc(12,M,1,2,"app-materials-filter",5),a.oc(13,E,4,1,"div",6),a.oc(14,V,1,0,"app-loader",7),a.Ob(15,"form",8),a.Wb("ngSubmit",(function(t){return e.onSubmit()})),a.Ob(16,"div",9,10),a.Ob(18,"div",11),a.Ob(19,"h5",12),a.qc(20),a.Mb(),a.Ob(21,"div",13),a.Ob(22,"div",14),a.Lb(23,"input",15),a.Ob(24,"label",16),a.qc(25,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),a.Mb(),a.oc(26,W,2,0,"span",17),a.Mb(),a.Ob(27,"div",14),a.Lb(28,"input",18,19),a.Ob(30,"label",20),a.qc(31,"\u041a\u043b\u0430\u0441\u0441"),a.Mb(),a.oc(32,j,2,0,"span",17),a.Mb(),a.Ob(33,"div",14),a.Lb(34,"input",21,22),a.Ob(36,"label",23),a.qc(37,"\u0413\u0440\u0443\u043f\u043f\u0430"),a.Mb(),a.Mb(),a.Ob(38,"div",14),a.Lb(39,"input",24),a.Ob(40,"label",25),a.qc(41,"\u043c\u0430\u0440\u043a\u0438 \u0441\u0442\u0430\u043b\u0435\u0439"),a.Mb(),a.Mb(),a.Ob(42,"div",26),a.Lb(43,"input",27),a.Ob(44,"label",28),a.qc(45,"Ni%"),a.Mb(),a.oc(46,R,2,0,"span",17),a.Mb(),a.Ob(47,"div",26),a.Lb(48,"input",29),a.Ob(49,"label",30),a.qc(50,"Cr%"),a.Mb(),a.oc(51,A,2,0,"span",17),a.Mb(),a.Ob(52,"div",26),a.Lb(53,"input",31),a.Ob(54,"label",32),a.qc(55,"Mo%"),a.Mb(),a.oc(56,T,2,0,"span",17),a.Mb(),a.Ob(57,"div",26),a.Lb(58,"input",33),a.Ob(59,"label",34),a.qc(60,"Cu%"),a.Mb(),a.oc(61,z,2,0,"span",17),a.Mb(),a.Ob(62,"div",26),a.Lb(63,"input",35),a.Ob(64,"label",36),a.qc(65,"Mn%"),a.Mb(),a.oc(66,X,2,0,"span",17),a.Mb(),a.Ob(67,"div",26),a.Lb(68,"input",37),a.Ob(69,"label",38),a.qc(70,"W%"),a.Mb(),a.oc(71,D,2,0,"span",17),a.Mb(),a.Ob(72,"div",26),a.Lb(73,"input",39),a.Ob(74,"label",40),a.qc(75,"V%"),a.Mb(),a.oc(76,H,2,0,"span",17),a.Mb(),a.Ob(77,"div",26),a.Lb(78,"input",41),a.Ob(79,"label",42),a.qc(80,"Co%"),a.Mb(),a.oc(81,B,2,0,"span",17),a.Mb(),a.Ob(82,"div",26),a.Lb(83,"input",43),a.Ob(84,"label",44),a.qc(85,"Si%"),a.Mb(),a.oc(86,K,2,0,"span",17),a.Mb(),a.Ob(87,"div",26),a.Lb(88,"input",45),a.Ob(89,"label",46),a.qc(90,"Ti%"),a.Mb(),a.oc(91,J,2,0,"span",17),a.Mb(),a.Ob(92,"div",26),a.Lb(93,"input",47),a.Ob(94,"label",48),a.qc(95,"Al%"),a.Mb(),a.oc(96,Q,2,0,"span",17),a.Mb(),a.Ob(97,"div",26),a.Lb(98,"input",49),a.Ob(99,"label",50),a.qc(100,"Nb%"),a.Mb(),a.oc(101,U,2,0,"span",17),a.Mb(),a.Ob(102,"div",26),a.Lb(103,"input",51),a.Ob(104,"label",52),a.qc(105,"Fe%"),a.Mb(),a.oc(106,Z,2,0,"span",17),a.Mb(),a.Ob(107,"div",26),a.Lb(108,"input",53),a.Ob(109,"label",54),a.qc(110,"P%"),a.Mb(),a.oc(111,tt,2,0,"span",17),a.Mb(),a.Ob(112,"div",26),a.Lb(113,"input",55),a.Ob(114,"label",56),a.qc(115,"S%"),a.Mb(),a.oc(116,et,2,0,"span",17),a.Mb(),a.Ob(117,"div",26),a.Lb(118,"input",57),a.Ob(119,"label",58),a.qc(120,"C%"),a.Mb(),a.oc(121,it,2,0,"span",17),a.Mb(),a.Mb(),a.Mb(),a.Ob(122,"div",59),a.Ob(123,"button",60),a.Wb("click",(function(t){return e.onCancel()})),a.qc(124,"\u041e\u0442\u043c\u0435\u043d\u0430"),a.Mb(),a.Ob(125,"button",61),a.qc(126,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&t&&(a.yb(9),a.cc("ngClass",a.fc(44,ct,e.isFilterVisible,e.isFiltered())),a.yb(3),a.cc("ngIf",e.isFilterVisible),a.yb(1),a.cc("ngIf",!e.loading),a.yb(1),a.cc("ngIf",e.loading),a.yb(1),a.cc("formGroup",e.form),a.yb(5),a.sc("",e.isNew?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"," \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),a.yb(3),a.cc("ngClass",a.ec(47,lt,e.form.get("vid").invalid&&e.form.get("vid").touched)),a.yb(3),a.cc("ngIf",e.form.get("vid").invalid&&e.form.get("vid").touched),a.yb(2),a.cc("ngClass",a.ec(49,lt,e.form.get("classSteel").invalid&&e.form.get("classSteel").touched)),a.yb(4),a.cc("ngIf",e.form.controls.classSteel.invalid&&e.form.controls.classSteel.touched),a.yb(11),a.cc("ngClass",a.ec(51,lt,e.form.get("ni").invalid&&e.form.get("ni").touched)),a.yb(3),a.cc("ngIf",e.form.get("ni").invalid&&(e.form.get("ni").touched||e.form.get("ni").dirty)),a.yb(2),a.cc("ngClass",a.ec(53,lt,e.form.get("cr").invalid&&e.form.get("cr").touched)),a.yb(3),a.cc("ngIf",e.form.get("cr").invalid&&(e.form.get("cr").touched||e.form.get("cr").dirty)),a.yb(2),a.cc("ngClass",a.ec(55,lt,e.form.get("mo").invalid&&e.form.get("mo").touched)),a.yb(3),a.cc("ngIf",e.form.get("mo").invalid&&(e.form.get("mo").touched||e.form.get("mo").dirty)),a.yb(2),a.cc("ngClass",a.ec(57,lt,e.form.get("cu").invalid&&e.form.get("cu").touched)),a.yb(3),a.cc("ngIf",e.form.get("cu").invalid&&(e.form.get("cu").touched||e.form.get("cu").dirty)),a.yb(2),a.cc("ngClass",a.ec(59,lt,e.form.get("mn").invalid&&e.form.get("mn").touched)),a.yb(3),a.cc("ngIf",e.form.get("mn").invalid&&(e.form.get("mn").touched||e.form.get("mn").dirty)),a.yb(2),a.cc("ngClass",a.ec(61,lt,e.form.get("w").invalid&&e.form.get("w").touched)),a.yb(3),a.cc("ngIf",e.form.get("w").invalid&&(e.form.get("w").touched||e.form.get("w").dirty)),a.yb(2),a.cc("ngClass",a.ec(63,lt,e.form.get("v").invalid&&e.form.get("v").touched)),a.yb(3),a.cc("ngIf",e.form.get("v").invalid&&(e.form.get("v").touched||e.form.get("v").dirty)),a.yb(2),a.cc("ngClass",a.ec(65,lt,e.form.get("co").invalid&&e.form.get("co").touched)),a.yb(3),a.cc("ngIf",e.form.get("co").invalid&&(e.form.get("co").touched||e.form.get("co").dirty)),a.yb(2),a.cc("ngClass",a.ec(67,lt,e.form.get("si").invalid&&e.form.get("si").touched)),a.yb(3),a.cc("ngIf",e.form.get("si").invalid&&(e.form.get("si").touched||e.form.get("si").dirty)),a.yb(2),a.cc("ngClass",a.ec(69,lt,e.form.get("ti").invalid&&e.form.get("ti").touched)),a.yb(3),a.cc("ngIf",e.form.get("ti").invalid&&(e.form.get("ti").touched||e.form.get("ti").dirty)),a.yb(2),a.cc("ngClass",a.ec(71,lt,e.form.get("al").invalid&&e.form.get("al").touched)),a.yb(3),a.cc("ngIf",e.form.get("al").invalid&&(e.form.get("al").touched||e.form.get("al").dirty)),a.yb(2),a.cc("ngClass",a.ec(73,lt,e.form.get("nb").invalid&&e.form.get("nb").touched)),a.yb(3),a.cc("ngIf",e.form.get("nb").invalid&&(e.form.get("nb").touched||e.form.get("nb").dirty)),a.yb(2),a.cc("ngClass",a.ec(75,lt,e.form.get("fe").invalid&&e.form.get("fe").touched)),a.yb(3),a.cc("ngIf",e.form.get("fe").invalid&&(e.form.get("fe").touched||e.form.get("flex-fill").dirty)),a.yb(2),a.cc("ngClass",a.ec(77,lt,e.form.get("p").invalid&&e.form.get("p").touched)),a.yb(3),a.cc("ngIf",e.form.get("p").invalid&&(e.form.get("p").touched||e.form.get("p").dirty)),a.yb(2),a.cc("ngClass",a.ec(79,lt,e.form.get("s").invalid&&e.form.get("s").touched)),a.yb(3),a.cc("ngIf",e.form.get("s").invalid&&(e.form.get("s").touched||e.form.get("s").dirty)),a.yb(2),a.cc("ngClass",a.ec(81,lt,e.form.get("c").invalid&&e.form.get("c").touched)),a.yb(3),a.cc("ngIf",e.form.get("c").invalid&&(e.form.get("c").touched||e.form.get("card-action").dirty)),a.yb(2),a.cc("disabled",e.form.disabled),a.yb(2),a.cc("disabled",e.form.invalid||e.form.disabled))},directives:[n.j,n.l,l.r,l.j,l.f,l.a,l.i,l.d,l.h,l.m,d,n.k,p.a],styles:["div.table-container[_ngcontent-%COMP%]{max-height:800px;overflow:scroll;margin:-10px}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{top:0;background:#a1887f;color:#fff;z-index:200}tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky}tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{left:0;background:#ffcc80;border-right:0 solid #ccc}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#ffe0b2;border:1px solid #ccc}table[_ngcontent-%COMP%]{border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:.3em}.autocomplete[_ngcontent-%COMP%]{font-size:10px}"]}),nt),rt=i("V/fk"),bt=i("tyNb"),st=[{path:"",component:at}],ft=((ot=function t(){_classCallCheck(this,t)}).\u0275mod=a.Ib({type:ot}),ot.\u0275inj=a.Hb({factory:function(t){return new(t||ot)},imports:[[bt.h.forChild(st)],bt.h]}),ot);i.d(e,"MaterialsModule",(function(){return ut}));var mt,ut=((mt=function t(){_classCallCheck(this,t)}).\u0275mod=a.Ib({type:mt}),mt.\u0275inj=a.Hb({factory:function(t){return new(t||mt)},providers:[],imports:[[n.c,o.a,rt.a,ft]]}),mt)}}]);