(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"eV+i":function(t,e,i){"use strict";i.r(e);var o=i("ofXK"),c=i("PCNd"),n=i("O+p6"),l=i("3Pt+"),a=i("fXoL"),r=i("slBj");const s=["select1"],b=["select2"];function m(t,e){if(1&t&&(a.Ob(0,"option",19),a.Ob(1,"span",10),a.qc(2),a.Mb(),a.Mb()),2&t){const t=e.$implicit;a.cc("value",t),a.yb(2),a.rc(t)}}function f(t,e){if(1&t&&(a.Ob(0,"option",19),a.Ob(1,"span",10),a.qc(2),a.Mb(),a.Mb()),2&t){const t=e.$implicit;a.cc("value",t),a.yb(2),a.rc(t)}}let u=(()=>{class t{constructor(){this.onFilter=new a.n}ngOnInit(){}ngAfterViewInit(){this.select1=n.a.initFormSelect(this.select1Ref),this.select2=n.a.initFormSelect(this.select2Ref)}ngOnDestroy(){this.select1.destroy(),this.select2.destroy()}submitFilter(){const t={};this.vid&&(t.vid=this.vid),this.classSteel&&(t.classSteel=this.classSteel),this.groupSteel&&(t.groupSteel=this.groupSteel),this.onFilter.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Eb({type:t,selectors:[["app-materials-filter"]],viewQuery:function(t,e){var i;1&t&&(a.vc(s,!0),a.vc(b,!0)),2&t&&(a.gc(i=a.Xb())&&(e.select1Ref=i.first),a.gc(i=a.Xb())&&(e.select2Ref=i.first))},inputs:{arrClassSteel:"arrClassSteel",arrGroupSteel:"arrGroupSteel"},outputs:{onFilter:"onFilter"},decls:32,vars:5,consts:[[1,"filter","js-filter-blokc"],[1,"row"],[1,"col","s12","m2"],[1,"input-field"],["type","text","id","vid",2,"font-size","14px",3,"ngModel","ngModelChange"],["for","vid"],[1,"col","s12","m5"],[3,"ngModel","ngModelChange"],["select1",""],["value","","selected",""],[2,"font-size","14px"],[3,"value",4,"ngFor","ngForOf"],["for","classSteel"],[1,"col","s10","m4"],["select2",""],["for","groupSteel"],[1,"col","s2","m1"],[1,"collection-item","collection-item-icon",3,"click"],[1,"material-icons"],[3,"value"]],template:function(t,e){1&t&&(a.Ob(0,"div",0),a.Ob(1,"div",1),a.Ob(2,"div",2),a.Ob(3,"div",3),a.Ob(4,"input",4),a.Wb("ngModelChange",(function(t){return e.vid=t})),a.Mb(),a.Ob(5,"label",5),a.qc(6,"\u0412\u0438\u0434"),a.Mb(),a.Mb(),a.Mb(),a.Ob(7,"div",6),a.Ob(8,"div",3),a.Ob(9,"select",7,8),a.Wb("ngModelChange",(function(t){return e.classSteel=t})),a.Ob(11,"option",9),a.Ob(12,"span",10),a.qc(13,"\u0411\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430"),a.Mb(),a.Mb(),a.oc(14,m,3,2,"option",11),a.Mb(),a.Ob(15,"label",12),a.qc(16,"\u041a\u043b\u0430\u0441\u0441"),a.Mb(),a.Mb(),a.Mb(),a.Ob(17,"div",13),a.Ob(18,"div",3),a.Ob(19,"select",7,14),a.Wb("ngModelChange",(function(t){return e.groupSteel=t})),a.Ob(21,"option",9),a.Ob(22,"span",10),a.qc(23,"\u0411\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430"),a.Mb(),a.Mb(),a.oc(24,f,3,2,"option",11),a.Mb(),a.Ob(25,"label",15),a.qc(26,"\u0413\u0440\u0443\u043f\u043f\u0430"),a.Mb(),a.Mb(),a.Mb(),a.Ob(27,"div",16),a.Ob(28,"a",17),a.Wb("click",(function(t){return e.submitFilter()})),a.Ob(29,"span"),a.Ob(30,"i",18),a.qc(31,"done_outline"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&t&&(a.yb(4),a.cc("ngModel",e.vid),a.yb(5),a.cc("ngModel",e.classSteel),a.yb(5),a.cc("ngForOf",e.arrClassSteel),a.yb(5),a.cc("ngModel",e.groupSteel),a.yb(5),a.cc("ngForOf",e.arrGroupSteel))},directives:[l.a,l.i,l.k,l.o,l.l,l.q,o.k],styles:[".col[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{margin-top:10px!important;margin-bottom:10px!important}"]}),t})();var d=i("668k");const p=["modal"],g=["autocompleteCl"],h=["autocompleteGr"];function v(t,e){if(1&t){const t=a.Pb();a.Ob(0,"app-materials-filter",62),a.Wb("onFilter",(function(e){return a.jc(t),a.Yb().applyFilter(e)})),a.Mb()}if(2&t){const t=a.Yb();a.cc("arrClassSteel",t.arrClassSteel)("arrGroupSteel",t.arrGroupSteel)}}function M(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.ni)}}function O(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.cr)}}function y(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.mo)}}function C(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.cu)}}function q(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.mn)}}function S(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.w)}}function I(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.v)}}function x(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.co)}}function w(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.ti)}}function k(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.fe)}}function F(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.p)}}function N(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.s)}}function _(t,e){if(1&t&&(a.Ob(0,"td"),a.qc(1),a.Mb()),2&t){const t=a.Yb().$implicit;a.yb(1),a.rc(t.c)}}function G(t,e){1&t&&a.Lb(0,"td")}function L(t,e){if(1&t){const t=a.Pb();a.Ob(0,"tbody"),a.Ob(1,"tr"),a.Ob(2,"th"),a.Ob(3,"a",69),a.Wb("click",(function(i){a.jc(t);const o=e.$implicit;return a.Yb(3).onSelectMaterial(o)})),a.qc(4),a.Mb(),a.Mb(),a.oc(5,M,2,1,"td",70),a.oc(6,O,2,1,"td",70),a.oc(7,y,2,1,"td",70),a.oc(8,C,2,1,"td",70),a.oc(9,q,2,1,"td",70),a.oc(10,S,2,1,"td",70),a.oc(11,I,2,1,"td",70),a.oc(12,x,2,1,"td",70),a.Ob(13,"td"),a.qc(14),a.Mb(),a.oc(15,w,2,1,"td",70),a.Ob(16,"td"),a.qc(17),a.Mb(),a.Ob(18,"td"),a.qc(19),a.Mb(),a.oc(20,k,2,1,"td",70),a.oc(21,F,2,1,"td",70),a.oc(22,N,2,1,"td",70),a.oc(23,_,2,1,"td",70),a.Ob(24,"td"),a.qc(25),a.Mb(),a.Ob(26,"td"),a.Ob(27,"a",71),a.Ob(28,"span"),a.Ob(29,"i",72),a.Wb("click",(function(i){a.jc(t);const o=e.$implicit;return a.Yb(3).onSelectMaterial(o)})),a.qc(30,"autorenew"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Ob(31,"td"),a.Ob(32,"a",71),a.Ob(33,"span"),a.Ob(34,"i",72),a.Wb("click",(function(i){a.jc(t);const o=e.$implicit;return a.Yb(3).onDeleteMaterial(i,o)})),a.qc(35,"delete"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.oc(36,G,1,0,"ng-template",null,73,a.pc),a.Mb(),a.Mb()}if(2&t){const t=e.$implicit,i=a.hc(37);a.yb(4),a.rc(t.vid),a.yb(1),a.cc("ngIf",0!==t.ni)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.cr)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.mo)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.cu)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.mn)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.w)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.v)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.co)("ngIfElse",i),a.yb(2),a.rc(t.si),a.yb(1),a.cc("ngIf",0!==t.ti)("ngIfElse",i),a.yb(2),a.rc(t.al),a.yb(2),a.rc(t.nb),a.yb(1),a.cc("ngIf",0!==t.fe)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.p)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.s)("ngIfElse",i),a.yb(1),a.cc("ngIf",0!==t.c)("ngIfElse",i),a.yb(2),a.rc(t.markSteel)}}function P(t,e){if(1&t&&(a.Ob(0,"div"),a.Ob(1,"div",65),a.Ob(2,"div",66),a.Ob(3,"table"),a.Ob(4,"thead"),a.Ob(5,"tr"),a.Ob(6,"th"),a.qc(7,"\u0413\u0440\u0443\u043f\u043f\u0430"),a.Lb(8,"br"),a.qc(9,"\u043e\u0442\u0445\u043e\u0434\u043e\u0432"),a.Mb(),a.Ob(10,"th"),a.qc(11,"Ni%"),a.Mb(),a.Ob(12,"th"),a.qc(13,"Cr%"),a.Mb(),a.Ob(14,"th"),a.qc(15,"Mo%"),a.Mb(),a.Ob(16,"th"),a.qc(17,"Cu%"),a.Mb(),a.Ob(18,"th"),a.qc(19,"Mn%"),a.Mb(),a.Ob(20,"th"),a.qc(21,"W%"),a.Mb(),a.Ob(22,"th"),a.qc(23,"V%"),a.Mb(),a.Ob(24,"th"),a.qc(25,"Co%"),a.Mb(),a.Ob(26,"th"),a.qc(27,"Si%"),a.Mb(),a.Ob(28,"th"),a.qc(29,"Ti%"),a.Mb(),a.Ob(30,"th"),a.qc(31,"Al%"),a.Mb(),a.Ob(32,"th"),a.qc(33,"Nb%"),a.Mb(),a.Ob(34,"th"),a.qc(35,"Fe%"),a.Mb(),a.Ob(36,"th"),a.qc(37,"P%"),a.Mb(),a.Ob(38,"th"),a.qc(39,"S%"),a.Mb(),a.Ob(40,"th"),a.qc(41,"C%"),a.Mb(),a.Ob(42,"th"),a.qc(43,"\u041c\u0430\u0440\u043a\u0438 \u0441\u0442\u0430\u043b\u0435\u0439"),a.Mb(),a.Ob(44,"th",67),a.qc(45,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),a.Mb(),a.Mb(),a.Mb(),a.oc(46,L,38,31,"tbody",68),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&t){const t=a.Yb(2);a.yb(2),a.nc("height",t.height,"px"),a.yb(44),a.cc("ngForOf",t.materials)}}function $(t,e){1&t&&(a.Ob(0,"div",74),a.qc(1,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u043d\u0435\u0442."),a.Mb())}function Y(t,e){if(1&t&&(a.Ob(0,"div",13),a.oc(1,P,47,2,"div",63),a.oc(2,$,2,0,"ng-template",null,64,a.pc),a.Mb()),2&t){const t=a.Yb();a.yb(1),a.cc("ngIf",t.materials.length>0)}}function E(t,e){1&t&&a.Lb(0,"app-loader")}function V(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041f\u043e\u0437\u0438\u0446\u0438\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439. "),a.Mb())}function W(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1,"\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439. "),a.Mb())}function j(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function R(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function A(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function z(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function T(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function X(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function D(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function H(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function B(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function K(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function J(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function Q(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function U(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function Z(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function tt(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}function et(t,e){1&t&&(a.Ob(0,"span",75),a.qc(1," \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0, \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 100. "),a.Mb())}const it=function(t,e){return{active:t,red:e}},ot=function(t){return{invalid:t}};let ct=(()=>{class t{constructor(t,e){this.materialsService=t,this._formBuilder=e,this.loading=!1,this.isFilterVisible=!1,this.koef=.7,this.isNew=!0,this.form=this._formBuilder.group({vid:[null,l.p.required],classSteel:["",l.p.required],groupSteel:"",markSteel:"",ni:[null,[l.p.min(0),l.p.max(100)]],cr:[null,[l.p.min(0),l.p.max(100)]],mo:[null,[l.p.min(0),l.p.max(100)]],cu:[null,[l.p.min(0),l.p.max(100)]],mn:[null,[l.p.min(0),l.p.max(100)]],w:[null,[l.p.min(0),l.p.max(100)]],v:[null,[l.p.min(0),l.p.max(100)]],co:[null,[l.p.min(0),l.p.max(100)]],si:null,ti:[null,[l.p.min(0),l.p.max(100)]],al:null,nb:null,fe:[null,[l.p.min(0),l.p.max(100)]],p:[null,[l.p.min(0),l.p.max(100)]],s:[null,[l.p.min(0),l.p.max(100)]],c:[null,[l.p.min(0),l.p.max(100)]]}),this.materialId=null,this.materialList=[],this.materials=[],this.filter={}}ngOnInit(){this.loading=!0,this.height=this.koef*window.innerHeight,this.fetch(),this.arrClassSteel=this.arrClassSteel,this.arrGroupSteel=this.arrGroupSteel}fetch(){const t=Object.assign({},this.filter);this.oSub=this.materialsService.fetch(t).subscribe(t=>{this.materials=t.materials,this.arrClassSteel=t.arrClassSteel,this.arrGroupSteel=t.arrGroupSteel,this.loading=!1})}onResize(t){this.height=this.koef*t.target.innerHeight}ngAfterViewInit(){this.modal=n.a.initModal(this.modalRef),this.autocompleteCl=n.a.initAutocomplete(this.autocompleteClRef,this.validate.bind(this),0),this.autocompleteGr=n.a.initAutocomplete(this.autocompleteGrRef,this.validate.bind(this),0)}ngOnDestroy(){this.modal.destroy(),this.oSub.unsubscribe(),this.autocompleteCl.destroy(),this.autocompleteGr.destroy()}onCancel(){this.modal.close()}filterVisible(){this.isFilterVisible=!this.isFilterVisible,this.koef=!0===this.isFilterVisible?.5:.7,this.height=this.koef*window.innerHeight}applyFilter(t){this.materials=[],this.filter=t,this.loading=!0,this.fetch()}isFiltered(){return 0!==Object.keys(this.filter).length}update(){this.autocompleteCl.updateData(this.arrToString(this.arrClassSteel)),this.autocompleteGr.updateData(this.arrToString(this.arrGroupSteel))}arrToString(t){this.data={};for(let e of t)this.data[e]=null;return this.data}validate(){this.autocompleteCl.el.value&&this.form.patchValue({classSteel:this.autocompleteCl.el.value}),this.autocompleteGr.el.value&&this.form.patchValue({groupSteel:this.autocompleteGr.el.value})}onAddMaterial(){this.materialId=null,this.form.reset({classSteel:"",groupSteel:"",markSteel:"",vid:null,ni:null,cr:null,mo:null,cu:null,mn:null,w:null,v:null,co:null,si:null,ti:null,al:null,nb:null,fe:null,p:null,s:null,c:null}),this.isNew=!0,this.modal.open(),n.a.updateTextInputs(),this.update()}onSelectMaterial(t){this.materialId=t._id,this.form.patchValue({classSteel:t.classSteel,groupSteel:t.groupSteel,markSteel:t.markSteel,vid:t.vid,ni:0===t.ni?"":t.ni,cr:0===t.cr?"":t.cr,mo:0===t.mo?"":t.mo,cu:0===t.cu?"":t.cu,mn:0===t.mn?"":t.mn,w:0===t.w?"":t.w,v:0===t.v?"":t.v,co:0===t.co?"":t.co,si:t.si,ti:0===t.ti?"":t.ti,al:t.al,nb:t.nb,fe:0===t.fe?"":t.fe,p:0===t.p?"":t.p,s:0===t.s?"":t.s,c:0===t.c?"":t.c}),this.isNew=!1,this.modal.open(),n.a.updateTextInputs(),this.update()}onDeleteMaterial(t,e){t.stopPropagation(),window.confirm(`\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b "${e.vid}"?`)&&this.materialsService.delete(e).subscribe(t=>{const i=this.materials.findIndex(t=>t._id===e._id);this.materials.splice(i,1),n.a.toast(t.message)},t=>n.a.toast(t.error.message))}onSubmit(){this.form.disable();const t={classSteel:this.autocompleteCl.el.value?this.autocompleteCl.el.value:this.form.value.classSteel,groupSteel:this.autocompleteGr.el.value?this.autocompleteGr.el.value:this.form.value.groupSteel,markSteel:this.form.value.markSteel,vid:this.form.value.vid,ni:this.form.value.ni?+this.form.value.ni.toFixed(2):0,cr:this.form.value.cr?+this.form.value.cr.toFixed(2):0,mo:this.form.value.mo?+this.form.value.mo.toFixed(2):0,cu:this.form.value.cu?+this.form.value.cu.toFixed(2):0,mn:this.form.value.mn?+this.form.value.mn.toFixed(2):0,w:this.form.value.w?+this.form.value.w.toFixed(2):0,v:this.form.value.v?+this.form.value.v.toFixed(2):0,co:this.form.value.co?+this.form.value.co.toFixed(2):0,si:this.form.value.si,ti:this.form.value.ti?+this.form.value.ti.toFixed(2):0,al:this.form.value.al,nb:this.form.value.nb,fe:this.form.value.fe?+this.form.value.fe.toFixed(2):0,p:this.form.value.p?+this.form.value.p.toFixed(3):0,s:this.form.value.s?+this.form.value.s.toFixed(3):0,c:this.form.value.c?+this.form.value.c.toFixed(2):0};if(t.groupSteel||(t.groupSteel=t.classSteel),t.ni+t.cr+t.mo+t.cu+t.mn+t.w+t.v+t.co+t.ti+t.p+t.s+t.c+t.fe>100)return this.modal.close(),this.form.enable(),n.a.toast("\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 100%");this.materialId?(t._id=this.materialId,this.materialsService.update(t).subscribe(t=>{const e=this.materials.findIndex(e=>e._id===t._id);this.materials[e]=t,n.a.toast("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")},t=>n.a.toast(t.error.message)),this.modal.close(),this.form.enable()):this.materials.findIndex(e=>e.vid===t.vid)<0?this.materialsService.create(t).subscribe(t=>{n.a.toast("\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0441\u043e\u0437\u0434\u0430\u043d"),this.materials.push(t),this.materials.sort((t,e)=>Intl.Collator().compare(t.vid,e.vid))},t=>n.a.toast(t.error.message),()=>{this.modal.close(),this.form.enable()}):(n.a.toast(`\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b "${t.vid}" \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442`),this.modal.close(),this.form.enable())}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(r.a),a.Kb(l.b))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-materials-page"]],viewQuery:function(t,e){var i;1&t&&(a.vc(p,!0),a.vc(g,!0),a.vc(h,!0)),2&t&&(a.gc(i=a.Xb())&&(e.modalRef=i.first),a.gc(i=a.Xb())&&(e.autocompleteClRef=i.first),a.gc(i=a.Xb())&&(e.autocompleteGrRef=i.first))},hostBindings:function(t,e,i){1&t&&a.Wb("resize",(function(t){return e.onResize(t)}),!1,a.ic)},decls:127,vars:83,consts:[[1,"page-title"],["col","","s6",""],[1,"waves-effect","waves-light","btn","btn-small",3,"click"],[1,"material-icons"],[1,"btn","btn-small",3,"ngClass","click"],[3,"arrClassSteel","arrGroupSteel","onFilter",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"modal"],["modal",""],[1,"modal-content"],[1,"mb1"],[1,"row"],[1,"input-field","col","s12","m4"],["formControlName","vid","id","mat-vid","type","text","maxlength","15",3,"ngClass"],["for","mat-vid"],["class","helper-text red-text",4,"ngIf"],["name","classSteel","formControlName","classSteel","id","mat-classSteel","type","text","maxlength","40",1,"autocomplete",3,"ngClass"],["autocompleteCl",""],["for","mat-classSteel"],["formControlName","groupSteel","id","mat-groupSteel","type","text","maxlength","50",1,"autocomplete"],["autocompleteGr",""],["for","mat-groupSteel"],["formControlName","markSteel","id","mat-markSteel","type","text","maxlength","30"],["for","mat-markSteel"],[1,"input-field","col","s4","m2"],["formControlName","ni","id","mat-ni","type","number",3,"ngClass"],["for","mat-ni"],["formControlName","cr","id","mat-cr","type","number",3,"ngClass"],["for","mat-cr"],["formControlName","mo","id","mat-mo","type","number",3,"ngClass"],["for","mat-mo"],["formControlName","cu","id","mat-cu","type","number",3,"ngClass"],["for","mat-cu"],["formControlName","mn","id","mat-mn","type","number",3,"ngClass"],["for","mat-mn"],["formControlName","w","id","mat-w","type","number",3,"ngClass"],["for","mat-w"],["formControlName","v","id","mat-v","type","number",3,"ngClass"],["for","mat-v"],["formControlName","co","id","mat-co","type","number",3,"ngClass"],["for","mat-co"],["formControlName","si","id","mat-si","type","text",3,"ngClass"],["for","mat-si"],["formControlName","ti","id","mat-ti","type","number",3,"ngClass"],["for","mat-ti"],["formControlName","al","id","mat-al","type","text",3,"ngClass"],["for","mat-al"],["formControlName","nb","id","mat-nb","type","text",3,"ngClass"],["for","mat-nb"],["formControlName","fe","id","mat-fe","type","number",3,"ngClass"],["for","mat-fe"],["formControlName","p","id","mat-p","type","number",3,"ngClass"],["for","mat-p"],["formControlName","s","id","mat-s","type","number",3,"ngClass"],["for","mat-s"],["formControlName","c","id","mat-c","type","number",3,"ngClass"],["for","mat-c"],[1,"modal-footer"],["type","button",1,"modal-action","waves-effect","waves-black","btn-flat",3,"disabled","click"],["type","submit",1,"modal-action","btn","waves-effect",3,"disabled"],[3,"arrClassSteel","arrGroupSteel","onFilter"],[4,"ngIfEmpty","ngIf"],["empty",""],[1,"col","s12"],[1,"table-container"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"collection-item","collection-item-icon",3,"click"],[4,"ngIf","ngIfElse"],[1,"collection-item","collection-item-icon"],[1,"material-icons",3,"click"],["space",""],[1,"center"],[1,"helper-text","red-text"]],template:function(t,e){1&t&&(a.Ob(0,"div",0),a.Ob(1,"h5"),a.qc(2,"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"),a.Mb(),a.Ob(3,"div",1),a.Ob(4,"button",2),a.Wb("click",(function(t){return e.onAddMaterial()})),a.Ob(5,"i",3),a.qc(6,"add"),a.Mb(),a.Mb(),a.Ob(7,"span"),a.qc(8,"\xa0"),a.Mb(),a.Ob(9,"button",4),a.Wb("click",(function(t){return e.filterVisible()})),a.Ob(10,"i",3),a.qc(11,"filter_list"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.oc(12,v,1,2,"app-materials-filter",5),a.oc(13,Y,4,1,"div",6),a.oc(14,E,1,0,"app-loader",7),a.Ob(15,"form",8),a.Wb("ngSubmit",(function(t){return e.onSubmit()})),a.Ob(16,"div",9,10),a.Ob(18,"div",11),a.Ob(19,"h5",12),a.qc(20),a.Mb(),a.Ob(21,"div",13),a.Ob(22,"div",14),a.Lb(23,"input",15),a.Ob(24,"label",16),a.qc(25,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),a.Mb(),a.oc(26,V,2,0,"span",17),a.Mb(),a.Ob(27,"div",14),a.Lb(28,"input",18,19),a.Ob(30,"label",20),a.qc(31,"\u041a\u043b\u0430\u0441\u0441"),a.Mb(),a.oc(32,W,2,0,"span",17),a.Mb(),a.Ob(33,"div",14),a.Lb(34,"input",21,22),a.Ob(36,"label",23),a.qc(37,"\u0413\u0440\u0443\u043f\u043f\u0430"),a.Mb(),a.Mb(),a.Ob(38,"div",14),a.Lb(39,"input",24),a.Ob(40,"label",25),a.qc(41,"\u043c\u0430\u0440\u043a\u0438 \u0441\u0442\u0430\u043b\u0435\u0439"),a.Mb(),a.Mb(),a.Ob(42,"div",26),a.Lb(43,"input",27),a.Ob(44,"label",28),a.qc(45,"Ni%"),a.Mb(),a.oc(46,j,2,0,"span",17),a.Mb(),a.Ob(47,"div",26),a.Lb(48,"input",29),a.Ob(49,"label",30),a.qc(50,"Cr%"),a.Mb(),a.oc(51,R,2,0,"span",17),a.Mb(),a.Ob(52,"div",26),a.Lb(53,"input",31),a.Ob(54,"label",32),a.qc(55,"Mo%"),a.Mb(),a.oc(56,A,2,0,"span",17),a.Mb(),a.Ob(57,"div",26),a.Lb(58,"input",33),a.Ob(59,"label",34),a.qc(60,"Cu%"),a.Mb(),a.oc(61,z,2,0,"span",17),a.Mb(),a.Ob(62,"div",26),a.Lb(63,"input",35),a.Ob(64,"label",36),a.qc(65,"Mn%"),a.Mb(),a.oc(66,T,2,0,"span",17),a.Mb(),a.Ob(67,"div",26),a.Lb(68,"input",37),a.Ob(69,"label",38),a.qc(70,"W%"),a.Mb(),a.oc(71,X,2,0,"span",17),a.Mb(),a.Ob(72,"div",26),a.Lb(73,"input",39),a.Ob(74,"label",40),a.qc(75,"V%"),a.Mb(),a.oc(76,D,2,0,"span",17),a.Mb(),a.Ob(77,"div",26),a.Lb(78,"input",41),a.Ob(79,"label",42),a.qc(80,"Co%"),a.Mb(),a.oc(81,H,2,0,"span",17),a.Mb(),a.Ob(82,"div",26),a.Lb(83,"input",43),a.Ob(84,"label",44),a.qc(85,"Si%"),a.Mb(),a.oc(86,B,2,0,"span",17),a.Mb(),a.Ob(87,"div",26),a.Lb(88,"input",45),a.Ob(89,"label",46),a.qc(90,"Ti%"),a.Mb(),a.oc(91,K,2,0,"span",17),a.Mb(),a.Ob(92,"div",26),a.Lb(93,"input",47),a.Ob(94,"label",48),a.qc(95,"Al%"),a.Mb(),a.oc(96,J,2,0,"span",17),a.Mb(),a.Ob(97,"div",26),a.Lb(98,"input",49),a.Ob(99,"label",50),a.qc(100,"Nb%"),a.Mb(),a.oc(101,Q,2,0,"span",17),a.Mb(),a.Ob(102,"div",26),a.Lb(103,"input",51),a.Ob(104,"label",52),a.qc(105,"Fe%"),a.Mb(),a.oc(106,U,2,0,"span",17),a.Mb(),a.Ob(107,"div",26),a.Lb(108,"input",53),a.Ob(109,"label",54),a.qc(110,"P%"),a.Mb(),a.oc(111,Z,2,0,"span",17),a.Mb(),a.Ob(112,"div",26),a.Lb(113,"input",55),a.Ob(114,"label",56),a.qc(115,"S%"),a.Mb(),a.oc(116,tt,2,0,"span",17),a.Mb(),a.Ob(117,"div",26),a.Lb(118,"input",57),a.Ob(119,"label",58),a.qc(120,"C%"),a.Mb(),a.oc(121,et,2,0,"span",17),a.Mb(),a.Mb(),a.Mb(),a.Ob(122,"div",59),a.Ob(123,"button",60),a.Wb("click",(function(t){return e.onCancel()})),a.qc(124,"\u041e\u0442\u043c\u0435\u043d\u0430"),a.Mb(),a.Ob(125,"button",61),a.qc(126,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&t&&(a.yb(9),a.cc("ngClass",a.fc(44,it,e.isFilterVisible,e.isFiltered())),a.yb(3),a.cc("ngIf",e.isFilterVisible),a.yb(1),a.cc("ngIf",!e.loading),a.yb(1),a.cc("ngIf",e.loading),a.yb(1),a.cc("formGroup",e.form),a.yb(5),a.sc("",e.isNew?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"," \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),a.yb(3),a.cc("ngClass",a.ec(47,ot,e.form.get("vid").invalid&&e.form.get("vid").touched)),a.yb(3),a.cc("ngIf",e.form.get("vid").invalid&&e.form.get("vid").touched),a.yb(2),a.cc("ngClass",a.ec(49,ot,e.form.get("classSteel").invalid&&e.form.get("classSteel").touched)),a.yb(4),a.cc("ngIf",e.form.controls.classSteel.invalid&&e.form.controls.classSteel.touched),a.yb(11),a.cc("ngClass",a.ec(51,ot,e.form.get("ni").invalid&&e.form.get("ni").touched)),a.yb(3),a.cc("ngIf",e.form.get("ni").invalid&&(e.form.get("ni").touched||e.form.get("ni").dirty)),a.yb(2),a.cc("ngClass",a.ec(53,ot,e.form.get("cr").invalid&&e.form.get("cr").touched)),a.yb(3),a.cc("ngIf",e.form.get("cr").invalid&&(e.form.get("cr").touched||e.form.get("cr").dirty)),a.yb(2),a.cc("ngClass",a.ec(55,ot,e.form.get("mo").invalid&&e.form.get("mo").touched)),a.yb(3),a.cc("ngIf",e.form.get("mo").invalid&&(e.form.get("mo").touched||e.form.get("mo").dirty)),a.yb(2),a.cc("ngClass",a.ec(57,ot,e.form.get("cu").invalid&&e.form.get("cu").touched)),a.yb(3),a.cc("ngIf",e.form.get("cu").invalid&&(e.form.get("cu").touched||e.form.get("cu").dirty)),a.yb(2),a.cc("ngClass",a.ec(59,ot,e.form.get("mn").invalid&&e.form.get("mn").touched)),a.yb(3),a.cc("ngIf",e.form.get("mn").invalid&&(e.form.get("mn").touched||e.form.get("mn").dirty)),a.yb(2),a.cc("ngClass",a.ec(61,ot,e.form.get("w").invalid&&e.form.get("w").touched)),a.yb(3),a.cc("ngIf",e.form.get("w").invalid&&(e.form.get("w").touched||e.form.get("w").dirty)),a.yb(2),a.cc("ngClass",a.ec(63,ot,e.form.get("v").invalid&&e.form.get("v").touched)),a.yb(3),a.cc("ngIf",e.form.get("v").invalid&&(e.form.get("v").touched||e.form.get("v").dirty)),a.yb(2),a.cc("ngClass",a.ec(65,ot,e.form.get("co").invalid&&e.form.get("co").touched)),a.yb(3),a.cc("ngIf",e.form.get("co").invalid&&(e.form.get("co").touched||e.form.get("co").dirty)),a.yb(2),a.cc("ngClass",a.ec(67,ot,e.form.get("si").invalid&&e.form.get("si").touched)),a.yb(3),a.cc("ngIf",e.form.get("si").invalid&&(e.form.get("si").touched||e.form.get("si").dirty)),a.yb(2),a.cc("ngClass",a.ec(69,ot,e.form.get("ti").invalid&&e.form.get("ti").touched)),a.yb(3),a.cc("ngIf",e.form.get("ti").invalid&&(e.form.get("ti").touched||e.form.get("ti").dirty)),a.yb(2),a.cc("ngClass",a.ec(71,ot,e.form.get("al").invalid&&e.form.get("al").touched)),a.yb(3),a.cc("ngIf",e.form.get("al").invalid&&(e.form.get("al").touched||e.form.get("al").dirty)),a.yb(2),a.cc("ngClass",a.ec(73,ot,e.form.get("nb").invalid&&e.form.get("nb").touched)),a.yb(3),a.cc("ngIf",e.form.get("nb").invalid&&(e.form.get("nb").touched||e.form.get("nb").dirty)),a.yb(2),a.cc("ngClass",a.ec(75,ot,e.form.get("fe").invalid&&e.form.get("fe").touched)),a.yb(3),a.cc("ngIf",e.form.get("fe").invalid&&(e.form.get("fe").touched||e.form.get("flex-fill").dirty)),a.yb(2),a.cc("ngClass",a.ec(77,ot,e.form.get("p").invalid&&e.form.get("p").touched)),a.yb(3),a.cc("ngIf",e.form.get("p").invalid&&(e.form.get("p").touched||e.form.get("p").dirty)),a.yb(2),a.cc("ngClass",a.ec(79,ot,e.form.get("s").invalid&&e.form.get("s").touched)),a.yb(3),a.cc("ngIf",e.form.get("s").invalid&&(e.form.get("s").touched||e.form.get("s").dirty)),a.yb(2),a.cc("ngClass",a.ec(81,ot,e.form.get("c").invalid&&e.form.get("c").touched)),a.yb(3),a.cc("ngIf",e.form.get("c").invalid&&(e.form.get("c").touched||e.form.get("card-action").dirty)),a.yb(2),a.cc("disabled",e.form.disabled),a.yb(2),a.cc("disabled",e.form.invalid||e.form.disabled))},directives:[o.j,o.l,l.r,l.j,l.f,l.a,l.i,l.d,l.h,l.m,u,o.k,d.a],styles:["div.table-container[_ngcontent-%COMP%]{max-height:800px;overflow:scroll;margin:-10px}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{top:0;background:#a1887f;color:#fff;z-index:200}tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky}tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{left:0;background:#ffcc80;border-right:0 solid #ccc}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#ffe0b2;border:1px solid #ccc}table[_ngcontent-%COMP%]{border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:.3em}.autocomplete[_ngcontent-%COMP%]{font-size:10px}"]}),t})();var nt=i("V/fk"),lt=i("tyNb");const at=[{path:"",component:ct}];let rt=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[lt.h.forChild(at)],lt.h]}),t})();i.d(e,"MaterialsModule",(function(){return st}));let st=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,c.a,nt.a,rt]]}),t})()}}]);